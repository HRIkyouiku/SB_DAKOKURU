<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>新規部署登録</title>
        <link rel="stylesheet" th:href="@{/css/style.css}">
    </head>
    <body>
        <header>
            <div class="navbar">
                <div class="logo">
                     <img th:src="@{/images/DAKOKURU.jpg}" alt="DAKOKURU">
                </div>
                     <nav id=navigation>
                        <ul>
                            <li class="current-item"><a th:href="@{/user/index}">【管理】ユーザー一覧</a></li>
                            <li><a th:href="@{/users_daily_timestamps/{period}(period=${#dates.format(#dates.createNow(), 'yyyy-MM')})}">【管理】打刻集計</a></li>
                            <li><a th:href="@{/department/index}">【管理】部署一覧</a></li>
                            <li><a th:href="@{/workPlace/index}">【管理】勤務地一覧</a></li>
                        </ul>
                            <span id="slide-line"></span>
                     </nav>
                <div class="user-info">
                    <span>ユーザー名</span>
                </div>
            </div>
        </header>
        <main layout:fragment="content">
                <!-- 各ページのコンテンツがここに入る -->
        </main>
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
            <script>
                $(function(){
                    let $nav = $("#navigation"),
                    $slideLine = $("#slide-line"),
                    $currentItem = $(".current-item");
           // メニューにアクティブな項目がある場合
                if ($currentItem.length) {
                    $slideLine.css({
                        "width": $currentItem.width() + 10 + "px",
                        "left": $currentItem.position().left + 5 + "px"
                    });
                }
           // 下線のトランジション
                    $nav.find("li").hover(
                        function(){
                        $slideLine.css({
                        "width": $(this).width() + 10 + "px",
                        "left": $(this).position().left + 5 + "px"
                     });
               },
               function(){
                   if ($currentItem.length) {
           // 現在の項目に戻す
                       $slideLine.css({
                           "width": $currentItem.width() + 10 + "px",
                           "left": $currentItem.position().left + 5 + "px"
                               });
                           } else {
           // 非表示にする
                               $slideLine.width(0);
                           }
                       }
                   );
               });
        </script>
        <h1>新規部署登録</h1>
            <div th:if="${errorMessage}" class="error-message">
                <p th:text="${errorMessage}"></p>
            </div>
        <form th:action="@{/department/store}" th:object="${department}" method="post">
            <div>
                <label for="nameJp">作成する部署名:</label>
                <input type="text" id="nameJp" th:field="*{nameJp}" placeholder="新しい部署名を入力">
                <span th:if="${#fields.hasErrors('nameJp')}" th:errors="*{nameJp}" class="validation-error"></span>
            </div>
            <div>
                <label for="nameEn">部署名（英語）:</label>
                <input type="text" id="nameEn" th:field="*{nameEn}" placeholder="新しい部署名（英語）" >
                <span th:if="${#fields.hasErrors('nameEn')}" th:errors="*{nameEn}" class="validation-error"></spa>
            </div>
            <div>
                <button type="submit" class="register-button" onclick="return confirm('登録します。よろしいですか？');">登録</button>
            </div>
        </form>
        <a th:href="@{/department/index}" class="back-link">部署一覧へ戻る</a>
    </body>
</html>