<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
<main layout:fragment="content">
	<h2>部署一覧</h2>
        <form th:action="@{/department/index/search}" method="post" enctype="multipart/form-data" th:object="${departmentForm}">
            <!-- メッセージ表示 -->
            <div th:if="${addSuccessMsg}" th:text="${addSuccessMsg}" style="color:red;"></div>
            <div th:if="${deleteSuccessMsg}" th:text="${deleteSuccessMsg}" style="color:red;"></div>
            <div th:if="${failMsg}" th:text="${failMsg}" style="color:red;"></div>

            <label>キーワード</label>
            <input type="text" name="keyword" placeholder="検索したい部署名を入力" th:value="${departmentForm.keyword}"> 
            <div th:if="${#fields.hasErrors('keyword')}" th:errors="*{keyword}" style="color:red;"></div>
            <input type="submit" value="検索">
        </form>
        <a th:href="@{/department/index}"><button>クリア</button></a>
        <a th:href="@{/department/create}"><button>部署新規追加</button></a>

        <div th:if="${searchCount}">検索結果 <span th:text="${searchCount}"></span>件</div>
        <!-- 部署名表示 -->
        <table>
            <tr th:each="departments : ${departmentList}">
                <td th:text="${departments.nameJp}"></td>
                <td hidden th:text="${departments.nameEn}"></td>
                <td>
                    <a th:href="@{/department/edit/{departmentsId}(departmentsId=${departments.id})}">
                        <button>編集</button>
                    </a>
                </td>
            </tr>
        </table>
</main>
</html>